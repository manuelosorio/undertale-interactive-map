"use strict";

var $audio = $('#audio'),
    $volumeIcon = $('#volumeIcon'),
    $player = $('.player'),
    $routerContainer = $('.router--container'),
    $menu = $('.nav--menu');
var $map = undefined;
$(document).ready(function () {
  routes();
  var $audio = $('#audio'),
      $muteButton = $('.icon'),
      $volumeIcon = $('#volumeIcon'); //alert variables

  var $alert = $('.alert'),
      $allow = $('#allow'),
      $decline = $('#decline');

  if (localStorage['soundAllowed'] !== undefined) {
    var isSoundAllowed = localStorage.getItem('soundAllowed');

    if (localStorage['soundAllowed'] === 'true') {
      $alert.remove();
      $audio.trigger('play');
      $audio.prop('volume', 0.25);
      $volumeIcon.attr('src', './images/sound.svg');
    } else {
      $alert.remove();
      $audio.trigger('pause');
      $audio.prop('volume', 0);
      $audio.prop('currentTime', '0');
      $volumeIcon.attr('src', './images/mute.svg');
    }
  } else {
    // $alert.remove()
    $audio.trigger('pause');
    $audio.prop('volume', 0);
    $audio.prop('currentTime', '0');
    $volumeIcon.attr('src', '');
  }

  $allow.click(function () {
    localStorage.setItem('soundAllowed', 'true');
    $alert.remove();
    $audio.trigger('play');
    $audio.prop('volume', 0.25);
    $volumeIcon.attr('src', './images/sound.svg');
  });
  $decline.click(function () {
    localStorage.setItem('soundAllowed', 'false');
    $volumeIcon.attr('src', './images/mute.svg');
    $alert.remove();
  });
  $volumeIcon.click(function () {
    if (localStorage['soundAllowed'] === 'true') {
      localStorage['soundAllowed'] = 'false';
      $volumeIcon.attr('src', './images/mute.svg');
      soundMute();
    } else if (localStorage['soundAllowed'] === 'false') {
      localStorage['soundAllowed'] = true;
      $volumeIcon.attr('src', './images/sound.svg');
      soundUnmute();
    }

    console.log('Is sound allowed', localStorage['soundAllowed']);
  });
  console.log('Is sound allowed: ', localStorage['soundAllowed']);
  $('.player').draggable({
    addClasses: false
  });
});
var $dialogue = $('#npc'),
    $avatar = $('#avatar'),
    $chat = $('#chat');

function dialogue(name, message) {
  var $this = $(this);
  $this.message = message;
  $this.name = name;
  var src = "images/" + $this.name.toLowerCase() + '.png';
  var alt = "Image of " + $this.name;
  $chat.text($this.message).html($chat.html().replace('[new]', '<br />'));
  $avatar.attr('src', src);
  $avatar.attr('alt', alt);
  dialogueShow();
}

function dialogueShow() {
  $dialogue.show();
}

function dialogueHide() {
  $chat.innerText = null;
  $avatar.attr('src', null);
  $avatar.attr('alt', null);
  $dialogue.hide();
}

function locationsLoad(name) {
  console.warn(window.location.href.indexOf("404") > -1);

  if (!(window.location.href.indexOf('404') > -1)) {
    $.ajaxSetup({
      cache: false
    });
    $routerContainer.css({
      opacity: '0'
    });
    $player.css({
      opacity: '0'
    });
    $routerContainer.load('./locations/' + name + '.html', function () {
      $routerContainer.stop().animate({
        opacity: '1'
      }, 800, 'swing');
      $player.stop().delay(800).css({
        opacity: '1'
      });
      $('#navMenu').on('click', function () {
        var $this = $(this);
        $this.toggleClass('active');
      });
      $('.map').draggable({
        addClasses: false
      });
      $('.interest-point').draggable({
        addClasses: false
      });
    });
  } else {
    $.ajaxSetup({
      cache: false
    });
    $routerContainer.css({
      opacity: '0'
    });
    $player.css({
      opacity: '0'
    });
    $routerContainer.load('./locations/' + name + '.html', function () {
      $routerContainer.css({
        opacity: '1'
      });
      $player.stop().delay(0).css({
        opacity: '0'
      });
    });
  }
}

var $links = $('#links');

function createNav(navItems) {}

$links.click(function () {
  deleteNav();
});

function deleteNav() {// $links.empty()
}

function newSound(name) {
  console.log("New Song name:", name);
  var src = "./audio/music/" + name + ".mp3";
  console.log("path: ", src);
  $audio.trigger("pause");
  $audio.prop("currentTime", "0");
  $audio.attr('src', src);
  console.log("Local Storage ".concat(localStorage.getItem('soundAllowed')));

  if (localStorage.getItem('soundAllowed') !== undefined || localStorage.getItem('soundAllowed') !== "false") {
    $audio.trigger('play');
  } else if (localStorage.getItem('soundAllowed') === "false") {}
}

function soundMute() {
  $audio.prop("volume", 0);
}

function soundUnmute() {
  $audio.prop("volume", 0.25);
  $audio.prop("currentTime", 0);
  $audio.trigger('play');
}

$(document).keydown(function (e) {
  var speed = 17,
      movement = 15;
  $map = $('.map');

  if (!(window.location.href.indexOf("404") > -1)) {
    switch (e.which) {
      //move up
      case 38:
      case 87:
        console.log(e.code + ' up');
        updatePosition(null, -1 * movement, speed, 'easeOutQuart');
        break;
      //move down

      case 40:
      case 83:
        console.log(e.code + ' down');
        updatePosition(null, movement, speed, 'easeOutQuart');
        break;
      // move left

      case 37:
      case 65:
        console.log(e.code + ' left');
        updatePosition(-1 * movement, null, speed, 'easeOutQuart');
        break;
      //move right

      case 39:
      case 68:
        updatePosition(movement, null, speed, 'easeOutQuart');
        break;
    }
  }
});

function setPosition(target, x, y) {
  var $this = $(this);
  $this.target = target;
  $this.posX = x;
  $this.posY = y;

  if ($this.posX != null && $this.posY != null) {
    console.log("Position X", $this.posX);
    console.log("Position Y", $this.posY);
    $this.target.css({
      'left': $this.posX + 'px',
      'top': $this.posY + 'px'
    });
  } else {
    console.warn("There is actually a null X or Y... Hopefully its intentional...");

    if ($this.posX != null) {
      $this.$this.target.css({
        'left': $this.posX + 'px'
      });
    } else {
      console.warn("X is returning null");
    }

    if ($this.posY != null) {
      $this.target.css({
        'top': $this.posY + 'px'
      });
    } else {
      console.warn("Y is returning null");
    }
  }
}

function updatePosition(x, y, dt, easing) {
  var $this = $(this);
  $this.moveX = x;
  $this.moveY = y;
  $this.offsetX = 5;
  $this.offsetY = 5;
  $this.dt = dt; // X Movement

  if ($this.moveX != null) {
    if ($this.moveX < 0) {
      $this.moveX *= -1;

      if ($player.position().left > 1) {
        $player.stop().animate({
          left: '-=' + $this.moveX + 'px'
        }, dt, easing);
      }

      $map.stop().animate({
        left: '+=' + ($this.moveX - $this.offsetX) + 'px'
      }, dt, easing);
    } else {
      if ($player.position().left < window.innerWidth / 2) {
        $player.stop().animate({
          left: '+=' + $this.moveX + 'px'
        }, dt, easing);
      }

      $map.stop().animate({
        left: '-=' + ($this.moveX - $this.offsetX) + 'px'
      }, dt, easing);
    }
  } // Y Movement


  if ($this.moveY != null) {
    if ($this.moveY < 0) {
      $this.moveY *= -1;

      if ($player.position().top > 1) {
        $player.stop().animate({
          top: '-=' + $this.moveY + 'px'
        }, dt, easing);
      }

      $map.stop().animate({
        top: '+=' + ($this.moveY - $this.offsetY) + 'px'
      }, dt, easing);
    } else {
      if ($player.position().top < window.innerHeight / 2) {
        $player.stop().animate({
          top: '+=' + $this.moveY + 'px'
        }, dt, easing);
      }

      $map.stop().animate({
        top: '-=' + ($this.moveY - $this.offsetY) + 'px'
      }, dt, easing);
    }
  }
}

var root = null;
var useHash = true; // Defaults to: false

var hash = '#!'; // Defaults to: '#'

var router = new Navigo(root, useHash, hash);

function routes() {
  router.on(function () {
    console.info('The Underground');
    locationsLoad('the-underground');
    newSound('start');
    setPosition($player, 62, 311);
    dialogueHide();
  });
  router.notFound(function (query) {
    console.info('404 page not found');
    locationsLoad('stay-determined');
    newSound('determination');
    router.navigate("/404");
    deleteNav();
    $(document).keydown(function (e) {
      if (window.location.href.indexOf("404") > -1) {
        setPosition($player, 62, 311);
        router.navigate("/");
      }
    });
  });
  router.on({
    'ruins': function ruins() {
      console.info('Ruins');
      locationsLoad('ruins');
      newSound('ruins');
      setPosition($player, 680, 377);
      dialogue('Toriel', '* I am Toriel, caretaker of the Ruins...[new]' + '* I pass through this place every day to see if anyone has fallen down');
    },
    'ruins/spider-bake-sale': function ruinsSpiderBakeSale() {
      newSound('spiderdance');
      setPosition($player, 680, 377);
      dialogue('Muffet', '* The Spider Bake Sale is a small vendor and fundraising' + ' event found in the Ruins and Hotland.');
    },
    'snowdin': function snowdin() {
      console.info('Snowdin Forest');
      locationsLoad('snowdin');
      newSound('snowdin');
      setPosition($player, 264, 468);
    },
    'snowdin/snowman': function snowdinSnowman() {
      setPosition($('.map'), -5634, -794);
      setPosition($player, 764, 300);
    },
    'snowdin/grillbys': function snowdinGrillbys() {
      setPosition($('.map'), -21909, -2870);
      setPosition($player, 779, 345);
    },
    'snowdin/papyrus-sans-house': function snowdinPapyrusSansHouse() {
      setPosition($('.map'), -23827, -2885);
      setPosition($player, 779, 345);
    },
    'waterfall': function waterfall() {
      console.info('Waterfall');
      locationsLoad('waterfall');
      setPosition($player, 475, 365);
      newSound('waterfall');
    },
    'waterfall/temmie': function waterfallTemmie() {
      console.info('Temmie');
      setPosition($('.map'), -14596, -5488);
      setPosition($player, 753, 375);
      newSound('temmie');
    },
    'hotland': function hotland() {
      console.info('Hotland');
      locationsLoad('hotland');
      setPosition($player, 258, 432);
      newSound('hotland');
    },
    'hotland/alphy': function hotlandAlphy() {
      setPosition($player, 768, 369.246);
      setPosition($('.map'), -4758.97, -6658.56);
      newSound('alphys');
    },
    'the-core': function theCore() {
      console.info('The Core');
      locationsLoad('the-core');
      newSound('the-core');
    },
    'new-home': function newHome() {
      console.info('New Home');
      locationsLoad('new-home');
      newSound('his-theme');
    }
  }).resolve();
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyIsIm1vZHVsZXMvZGlhbG9ndWUuanMiLCJtb2R1bGVzL2xvY2F0aW9ucy5qcyIsIm1vZHVsZXMvbmF2aWdhdGlvbi5qcyIsIm1vZHVsZXMvbmV3U291bmQuanMiLCJtb2R1bGVzL3BsYXllck1vdmVtZW50LmpzIiwibW9kdWxlcy9yb3V0ZXMuanMiXSwibmFtZXMiOlsiJGF1ZGlvIiwiJCIsIiR2b2x1bWVJY29uIiwiJHBsYXllciIsIiRyb3V0ZXJDb250YWluZXIiLCIkbWVudSIsIiRtYXAiLCJ1bmRlZmluZWQiLCJkb2N1bWVudCIsInJlYWR5Iiwicm91dGVzIiwiJG11dGVCdXR0b24iLCIkYWxlcnQiLCIkYWxsb3ciLCIkZGVjbGluZSIsImxvY2FsU3RvcmFnZSIsImlzU291bmRBbGxvd2VkIiwiZ2V0SXRlbSIsInJlbW92ZSIsInRyaWdnZXIiLCJwcm9wIiwiYXR0ciIsImNsaWNrIiwic2V0SXRlbSIsInNvdW5kTXV0ZSIsInNvdW5kVW5tdXRlIiwiY29uc29sZSIsImxvZyIsImRyYWdnYWJsZSIsImFkZENsYXNzZXMiLCIkZGlhbG9ndWUiLCIkYXZhdGFyIiwiJGNoYXQiLCJkaWFsb2d1ZSIsIm5hbWUiLCJtZXNzYWdlIiwiJHRoaXMiLCJzcmMiLCJ0b0xvd2VyQ2FzZSIsImFsdCIsInRleHQiLCJodG1sIiwicmVwbGFjZSIsImRpYWxvZ3VlU2hvdyIsInNob3ciLCJkaWFsb2d1ZUhpZGUiLCJpbm5lclRleHQiLCJoaWRlIiwibG9jYXRpb25zTG9hZCIsIndhcm4iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJpbmRleE9mIiwiYWpheFNldHVwIiwiY2FjaGUiLCJjc3MiLCJvcGFjaXR5IiwibG9hZCIsInN0b3AiLCJhbmltYXRlIiwiZGVsYXkiLCJvbiIsInRvZ2dsZUNsYXNzIiwiJGxpbmtzIiwiY3JlYXRlTmF2IiwibmF2SXRlbXMiLCJkZWxldGVOYXYiLCJuZXdTb3VuZCIsImtleWRvd24iLCJlIiwic3BlZWQiLCJtb3ZlbWVudCIsIndoaWNoIiwiY29kZSIsInVwZGF0ZVBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJ0YXJnZXQiLCJ4IiwieSIsInBvc1giLCJwb3NZIiwiZHQiLCJlYXNpbmciLCJtb3ZlWCIsIm1vdmVZIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJwb3NpdGlvbiIsImxlZnQiLCJpbm5lcldpZHRoIiwidG9wIiwiaW5uZXJIZWlnaHQiLCJyb290IiwidXNlSGFzaCIsImhhc2giLCJyb3V0ZXIiLCJOYXZpZ28iLCJpbmZvIiwibm90Rm91bmQiLCJxdWVyeSIsIm5hdmlnYXRlIiwicmVzb2x2ZSJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLENBQUEsQ0FBQSxRQUFBLENBQUE7QUFBQSxJQUNBQyxXQUFBLEdBQUFELENBQUEsQ0FBQSxhQUFBLENBREE7QUFBQSxJQUVBRSxPQUFBLEdBQUFGLENBQUEsQ0FBQSxTQUFBLENBRkE7QUFBQSxJQUdBRyxnQkFBQSxHQUFBSCxDQUFBLENBQUEsb0JBQUEsQ0FIQTtBQUFBLElBSUFJLEtBQUEsR0FBQUosQ0FBQSxDQUFBLFlBQUEsQ0FKQTtBQUtBLElBQUFLLElBQUEsR0FBQUMsU0FBQTtBQUNBTixDQUFBLENBQUFPLFFBQUEsQ0FBQSxDQUFBQyxLQUFBLENBQUEsWUFBQTtBQUNBQyxFQUFBQSxNQUFBO0FBQ0EsTUFBQVYsTUFBQSxHQUFBQyxDQUFBLENBQUEsUUFBQSxDQUFBO0FBQUEsTUFDQVUsV0FBQSxHQUFBVixDQUFBLENBQUEsT0FBQSxDQURBO0FBQUEsTUFFQUMsV0FBQSxHQUFBRCxDQUFBLENBQUEsYUFBQSxDQUZBLENBRkEsQ0FNQTs7QUFDQSxNQUFBVyxNQUFBLEdBQUFYLENBQUEsQ0FBQSxRQUFBLENBQUE7QUFBQSxNQUNBWSxNQUFBLEdBQUFaLENBQUEsQ0FBQSxRQUFBLENBREE7QUFBQSxNQUVBYSxRQUFBLEdBQUFiLENBQUEsQ0FBQSxVQUFBLENBRkE7O0FBSUEsTUFBQWMsWUFBQSxDQUFBLGNBQUEsQ0FBQSxLQUFBUixTQUFBLEVB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T0FBQSxDQUFBd0UsSUFBQSxDQUFBLFNBQUE7QUFDQWxELE1BQUFBLGFBQUEsQ0FBQSxTQUFBLENBQUE7QUFDQTRCLE1BQUFBLFdBQUEsQ0FBQXpFLE9BQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxDQUFBO0FBQ0FpRSxNQUFBQSxRQUFBLENBQUEsU0FBQSxDQUFBO0FBQ0EsS0F0REE7QUF1REEscUJBQUEsd0JBQUE7QUFDQVEsTUFBQUEsV0FBQSxDQUFBekUsT0FBQSxFQUFBLEdBQUEsRUFBQSxPQUFBLENBQUE7QUFDQXlFLE1BQUFBLFdBQUEsQ0FBQTNFLENBQUEsQ0FBQSxNQUFBLENBQUEsRUFBQSxDQUFBLE9BQUEsRUFBQSxDQUFBLE9BQUEsQ0FBQTtBQUNBbUUsTUFBQUEsUUFBQSxDQUFBLFFBQUEsQ0FBQTtBQUNBLEtBM0RBO0FBNERBLGdCQUFBLG1CQUFBO0FBQ0ExQyxNQUFBQSxPQUFBLENBQUF3RSxJQUFBLENBQUEsVUFBQTtBQUNBbEQsTUFBQUEsYUFBQSxDQUFBLFVBQUEsQ0FBQTtBQUNBb0IsTUFBQUEsUUFBQSxDQUFBLFVBQUEsQ0FBQTtBQUNBLEtBaEVBO0FBaUVBLGdCQUFBLG1CQUFBO0FBQ0ExQyxNQUFBQSxPQUFBLENBQUF3RSxJQUFBLENBQUEsVUFBQTtBQUNBbEQsTUFBQUEsYUFBQSxDQUFBLFVBQUEsQ0FBQTtBQUNBb0IsTUFBQUEsUUFBQSxDQUFBLFdBQUEsQ0FBQTtBQUNBO0FBckVBLEdBREEsRUF1RUFrQyxPQXZFQTtBQXlFQSIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCAkYXVkaW8gPSAkKCcjYXVkaW8nKSxcclxuICAgICAgJHZvbHVtZUljb24gPSAkKCcjdm9sdW1lSWNvbicpLFxyXG4gICAgICAkcGxheWVyID0gJCgnLnBsYXllcicpLFxyXG4gICAgICAkcm91dGVyQ29udGFpbmVyID0gJCgnLnJvdXRlci0tY29udGFpbmVyJyksXHJcbiAgICAgICRtZW51ID0gJCgnLm5hdi0tbWVudScpXHJcbiAgbGV0ICRtYXAgPSB1bmRlZmluZWRcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gIHJvdXRlcygpXHJcbiAgY29uc3QgJGF1ZGlvID0gJCgnI2F1ZGlvJyksXHJcbiAgICAgICAgJG11dGVCdXR0b24gPSAkKCcuaWNvbicpLFxyXG4gICAgICAgICR2b2x1bWVJY29uID0gJCgnI3ZvbHVtZUljb24nKVxyXG5cclxuICAvL2FsZXJ0IHZhcmlhYmxlc1xyXG4gIGNvbnN0ICRhbGVydCA9ICQoJy5hbGVydCcpLFxyXG4gICAgICAgICRhbGxvdyA9ICQoJyNhbGxvdycpLFxyXG4gICAgICAgICRkZWNsaW5lID0gJCgnI2RlY2xpbmUnKVxyXG5cclxuICBpZiAobG9jYWxTdG9yYWdlWydzb3VuZEFsbG93ZWQnXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICBsZXQgaXNTb3VuZEFsbG93ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc291bmRBbGxvd2VkJylcclxuICAgIGlmIChsb2NhbFN0b3JhZ2VbJ3NvdW5kQWxsb3dlZCddID09PSAndHJ1ZScpIHtcclxuICAgICAgJGFsZXJ0LnJlbW92ZSgpXHJcbiAgICAgICRhdWRpby50cmlnZ2VyKCdwbGF5JylcclxuICAgICAgJGF1ZGlvLnByb3AoJ3ZvbHVtZScsIDAuMjUpXHJcbiAgICAgICR2b2x1bWVJY29uLmF0dHIoJ3NyYycsICcuL2ltYWdlcy9zb3VuZC5zdmcnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGFsZXJ0LnJlbW92ZSgpXHJcbiAgICAgICRhdWRpby50cmlnZ2VyKCdwYXVzZScpXHJcbiAgICAgICRhdWRpby5wcm9wKCd2b2x1bWUnLCAwKVxyXG4gICAgICAkYXVkaW8ucHJvcCgnY3VycmVudFRpbWUnLCAnMCcpXHJcbiAgICAgICR2b2x1bWVJY29uLmF0dHIoJ3NyYycsICcuL2ltYWdlcy9tdXRlLnN2ZycpXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vICRhbGVydC5yZW1vdmUoKVxyXG4gICAgJGF1ZGlvLnRyaWdnZXIoJ3BhdXNlJylcclxuICAgICRhdWRpby5wcm9wKCd2b2x1bWUnLCAwKVxyXG4gICAgJGF1ZGlvLnByb3AoJ2N1cnJlbnRUaW1lJywgJzAnKVxyXG4gICAgJHZvbHVtZUljb24uYXR0cignc3JjJywgJycpXHJcbiAgfVxyXG5cclxuICAkYWxsb3cuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc291bmRBbGxvd2VkJywgJ3RydWUnKVxyXG4gICAgJGFsZXJ0LnJlbW92ZSgpXHJcbiAgICAkYXVkaW8udHJpZ2dlcigncGxheScpXHJcbiAgICAkYXVkaW8ucHJvcCgndm9sdW1lJywgMC4yNSlcclxuICAgICR2b2x1bWVJY29uLmF0dHIoJ3NyYycsICcuL2ltYWdlcy9zb3VuZC5zdmcnKVxyXG4gIH0pXHJcblxyXG4gICRkZWNsaW5lLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NvdW5kQWxsb3dlZCcsICdmYWxzZScpXHJcbiAgICAkdm9sdW1lSWNvbi5hdHRyKCdzcmMnLCAnLi9pbWFnZXMvbXV0ZS5zdmcnKVxyXG4gICAgJGFsZXJ0LnJlbW92ZSgpXHJcbiAgfSlcclxuXHJcblxyXG4gICR2b2x1bWVJY29uLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgIGlmIChsb2NhbFN0b3JhZ2VbJ3NvdW5kQWxsb3dlZCddID09PSAndHJ1ZScpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlWydzb3VuZEFsbG93ZWQnXSA9ICdmYWxzZSdcclxuICAgICAgJHZvbHVtZUljb24uYXR0cignc3JjJywgJy4vaW1hZ2VzL211dGUuc3ZnJylcclxuICAgICAgc291bmRNdXRlKClcclxuICAgIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlWydzb3VuZEFsbG93ZWQnXSA9PT0gJ2ZhbHNlJykge1xyXG4gICAgICBsb2NhbFN0b3JhZ2VbJ3NvdW5kQWxsb3dlZCddID0gdHJ1ZVxyXG4gICAgICAkdm9sdW1lSWNvbi5hdHRyKCdzcmMnLCAnLi9pbWFnZXMvc291bmQuc3ZnJylcclxuICAgICAgc291bmRVbm11dGUoKVxyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ0lzIHNvdW5kIGFsbG93ZWQnLCBsb2NhbFN0b3JhZ2VbJ3NvdW5kQWxsb3dlZCddKSBcclxuICB9KVxyXG5cclxuXHJcblxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdJcyBzb3VuZCBhbGxvd2VkOiAnLCBsb2NhbFN0b3JhZ2VbJ3NvdW5kQWxsb3dlZCddKVxyXG5cclxuXHJcblxyXG4gICQoJy5wbGF5ZXInKS5kcmFnZ2FibGUoe1xyXG4gICAgYWRkQ2xhc3NlczogZmFsc2VcclxuICB9KVxyXG5cclxufSlcclxuIiwiY29uc3QgJGRpYWxvZ3VlID0gJCgnI25wYycpLFxyXG4gICRhdmF0YXIgPSAkKCcjYXZhdGFyJyksXHJcbiAgJGNoYXQgPSAkKCcjY2hhdCcpXHJcbmZ1bmN0aW9uIGRpYWxvZ3VlKG5hbWUsIG1lc3NhZ2UpIHtcclxuICBsZXQgJHRoaXMgPSAkKHRoaXMpXHJcbiAgJHRoaXMubWVzc2FnZSA9IG1lc3NhZ2VcclxuICAkdGhpcy5uYW1lID0gbmFtZVxyXG4gIGxldCBzcmMgPSBcImltYWdlcy9cIiArICR0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSArJy5wbmcnXHJcbiAgbGV0IGFsdCA9IFwiSW1hZ2Ugb2YgXCIgKyAkdGhpcy5uYW1lXHJcbiAgJGNoYXQudGV4dCgkdGhpcy5tZXNzYWdlKS5odG1sKCRjaGF0Lmh0bWwoKS5yZXBsYWNlKCdbbmV3XScsICc8YnIgLz4nKSlcclxuICAkYXZhdGFyLmF0dHIoJ3NyYycsIHNyYylcclxuICAkYXZhdGFyLmF0dHIoJ2FsdCcsIGFsdClcclxuICBkaWFsb2d1ZVNob3coKVxyXG59XHJcbmZ1bmN0aW9uIGRpYWxvZ3VlU2hvdygpIHtcclxuICAkZGlhbG9ndWUuc2hvdygpXHJcbn1cclxuZnVuY3Rpb24gZGlhbG9ndWVIaWRlKCkge1xyXG4gICRjaGF0LmlubmVyVGV4dCA9IG51bGxcclxuICAkYXZhdGFyLmF0dHIoJ3NyYycsIG51bGwpXHJcbiAgJGF2YXRhci5hdHRyKCdhbHQnLCBudWxsKVxyXG4gICRkaWFsb2d1ZS5oaWRlKClcclxufVxyXG4iLCJmdW5jdGlvbiBsb2NhdGlvbnNMb2FkKG5hbWUpIHtcclxuICBjb25zb2xlLndhcm4od2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihcIjQwNFwiKSA+IC0xKVxyXG4gIGlmICghKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJzQwNCcpID4gLTEpKSB7XHJcbiAgICAkLmFqYXhTZXR1cCh7XHJcbiAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgfSlcclxuICAgICRyb3V0ZXJDb250YWluZXIuY3NzKHtvcGFjaXR5OiAnMCd9KVxyXG4gICAgJHBsYXllci5jc3Moe29wYWNpdHk6ICcwJ30pXHJcbiAgICAkcm91dGVyQ29udGFpbmVyLmxvYWQoJy4vbG9jYXRpb25zLycgKyBuYW1lICsgJy5odG1sJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAkcm91dGVyQ29udGFpbmVyLnN0b3AoKS5hbmltYXRlKHtvcGFjaXR5OiAnMSd9LCA4MDAsICdzd2luZycpXHJcbiAgICAgICRwbGF5ZXIuc3RvcCgpLmRlbGF5KDgwMCkuY3NzKHtvcGFjaXR5OiAnMSd9KVxyXG4gICAgICAkKCcjbmF2TWVudScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgJHRoaXMgPSAkKHRoaXMpXHJcbiAgICAgICAgJHRoaXMudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpXHJcbiAgICAgIH0pXHJcbiAgICAgICQoJy5tYXAnKS5kcmFnZ2FibGUoe1xyXG4gICAgICAgIGFkZENsYXNzZXM6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgICQoJy5pbnRlcmVzdC1wb2ludCcpLmRyYWdnYWJsZSh7XHJcbiAgICAgICAgYWRkQ2xhc3NlczogZmFsc2VcclxuICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG4gIH0gZWxzZSB7XHJcbiAgICAkLmFqYXhTZXR1cCh7XHJcbiAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgfSlcclxuICAgICRyb3V0ZXJDb250YWluZXIuY3NzKHtvcGFjaXR5OiAnMCd9KVxyXG4gICAgJHBsYXllci5jc3Moe29wYWNpdHk6ICcwJ30pXHJcbiAgICAkcm91dGVyQ29udGFpbmVyLmxvYWQoJy4vbG9jYXRpb25zLycgKyBuYW1lICsgJy5odG1sJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAkcm91dGVyQ29udGFpbmVyLmNzcyh7b3BhY2l0eTogJzEnfSlcclxuICAgICAgJHBsYXllci5zdG9wKCkuZGVsYXkoMCkuY3NzKHtvcGFjaXR5OiAnMCd9KVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwibGV0ICRsaW5rcyA9ICQoJyNsaW5rcycpXHJcbmZ1bmN0aW9uIGNyZWF0ZU5hdihuYXZJdGVtcykge1xyXG5cclxufVxyXG4kbGlua3MuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gIGRlbGV0ZU5hdigpXHJcbn0pXHJcbmZ1bmN0aW9uIGRlbGV0ZU5hdigpIHtcclxuICAvLyAkbGlua3MuZW1wdHkoKVxyXG59XHJcblxyXG5cclxuIiwiZnVuY3Rpb24gbmV3U291bmQobmFtZSkge1xyXG4gIGNvbnNvbGUubG9nKFwiTmV3IFNvbmcgbmFtZTpcIiwgbmFtZSlcclxuICBsZXQgc3JjID0gXCIuL2F1ZGlvL211c2ljL1wiICsgbmFtZSArIFwiLm1wM1wiO1xyXG4gIGNvbnNvbGUubG9nKFwicGF0aDogXCIsIHNyYylcclxuXHJcbiAgJGF1ZGlvLnRyaWdnZXIoXCJwYXVzZVwiKVxyXG4gICRhdWRpby5wcm9wKFwiY3VycmVudFRpbWVcIiwgXCIwXCIpXHJcbiAgJGF1ZGlvLmF0dHIoJ3NyYycsIHNyYylcclxuICBcclxuICBjb25zb2xlLmxvZyhgTG9jYWwgU3RvcmFnZSAke2xvY2FsU3RvcmFnZS5nZXRJdGVtKCdzb3VuZEFsbG93ZWQnKX1gKVxyXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc291bmRBbGxvd2VkJykgIT09IHVuZGVmaW5lZCB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc291bmRBbGxvd2VkJykgIT09IFwiZmFsc2VcIikge1xyXG4gICAgJGF1ZGlvLnRyaWdnZXIoJ3BsYXknKVxyXG4gIH0gZWxzZSBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NvdW5kQWxsb3dlZCcpID09PSBcImZhbHNlXCIpIHtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gc291bmRNdXRlKCkge1xyXG4gICRhdWRpby5wcm9wKFwidm9sdW1lXCIsIDApXHJcbn1cclxuZnVuY3Rpb24gc291bmRVbm11dGUgKCkge1xyXG4gICRhdWRpby5wcm9wKFwidm9sdW1lXCIsIDAuMjUpXHJcbiAgJGF1ZGlvLnByb3AoXCJjdXJyZW50VGltZVwiLCAwKVxyXG4gICRhdWRpby50cmlnZ2VyKCdwbGF5JylcclxufVxyXG4iLCIkKGRvY3VtZW50KS5rZXlkb3duKGZ1bmN0aW9uKGUpe1xyXG4gIGxldCBzcGVlZCA9IDE3LFxyXG4gICAgICBtb3ZlbWVudCA9IDE1XHJcbiAgJG1hcCA9ICQoJy5tYXAnKVxyXG4gIGlmICghKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCI0MDRcIikgPiAtMSkpIHtcclxuICAgIHN3aXRjaCAoZS53aGljaCkge1xyXG4gICAgICAvL21vdmUgdXBcclxuICAgICAgY2FzZSAzODpcclxuICAgICAgY2FzZSA4NzpcclxuICAgICAgICBjb25zb2xlLmxvZyhlLmNvZGUgKyAnIHVwJylcclxuICAgICAgICB1cGRhdGVQb3NpdGlvbihudWxsLCAtMSAqIG1vdmVtZW50LCBzcGVlZCwgJ2Vhc2VPdXRRdWFydCcpXHJcbiAgICAgIGJyZWFrXHJcbiAgICAgIFxyXG4gICAgICAvL21vdmUgZG93blxyXG4gICAgICBjYXNlIDQwOlxyXG4gICAgICBjYXNlIDgzOlxyXG4gICAgICAgIGNvbnNvbGUubG9nKGUuY29kZSArICcgZG93bicpXHJcbiAgICAgICAgdXBkYXRlUG9zaXRpb24obnVsbCwgbW92ZW1lbnQsIHNwZWVkLCAnZWFzZU91dFF1YXJ0JylcclxuICAgICAgYnJlYWtcclxuXHJcbiAgICAgIC8vIG1vdmUgbGVmdFxyXG4gICAgICBjYXNlIDM3OlxyXG4gICAgICBjYXNlIDY1OlxyXG4gICAgICAgIGNvbnNvbGUubG9nKGUuY29kZSArICcgbGVmdCcpXHJcbiAgICAgICAgdXBkYXRlUG9zaXRpb24oLTEgKiBtb3ZlbWVudCwgbnVsbCwgc3BlZWQsICdlYXNlT3V0UXVhcnQnKVxyXG4gICAgICBicmVha1xyXG4gICAgICAvL21vdmUgcmlnaHRcclxuICAgICAgY2FzZSAzOTpcclxuICAgICAgY2FzZSA2ODpcclxuICAgICAgICB1cGRhdGVQb3NpdGlvbihtb3ZlbWVudCwgbnVsbCwgc3BlZWQsICdlYXNlT3V0UXVhcnQnKVxyXG4gICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxufSlcclxuXHJcblxyXG5mdW5jdGlvbiBzZXRQb3NpdGlvbih0YXJnZXQsIHgsIHkpIHtcclxuICBsZXQgJHRoaXMgPSAkKHRoaXMpXHJcbiAgJHRoaXMudGFyZ2V0ID0gdGFyZ2V0XHJcbiAgJHRoaXMucG9zWCA9IHhcclxuICAkdGhpcy5wb3NZID0geVxyXG5cclxuICBpZiAoJHRoaXMucG9zWCAhPSBudWxsICYmICR0aGlzLnBvc1kgIT0gbnVsbCkge1xyXG4gICAgY29uc29sZS5sb2coXCJQb3NpdGlvbiBYXCIsICR0aGlzLnBvc1gpXHJcbiAgICBjb25zb2xlLmxvZyhcIlBvc2l0aW9uIFlcIiwgJHRoaXMucG9zWSlcclxuICAgICR0aGlzLnRhcmdldC5jc3Moe1xyXG4gICAgICAnbGVmdCc6ICR0aGlzLnBvc1ggKyAncHgnLFxyXG4gICAgICAndG9wJzogJHRoaXMucG9zWSArICdweCdcclxuICAgIH0pXHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUud2FybihcIlRoZXJlIGlzIGFjdHVhbGx5IGEgbnVsbCBYIG9yIFkuLi4gSG9wZWZ1bGx5IGl0cyBpbnRlbnRpb25hbC4uLlwiKVxyXG4gICAgaWYgKCR0aGlzLnBvc1ggIT0gbnVsbCkge1xyXG4gICAgICAkdGhpcy4kdGhpcy50YXJnZXQuY3NzKHtcclxuICAgICAgICAnbGVmdCc6ICR0aGlzLnBvc1ggKyAncHgnXHJcbiAgICAgIH0pXHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIlggaXMgcmV0dXJuaW5nIG51bGxcIilcclxuICAgIH1cclxuICAgIGlmICgkdGhpcy5wb3NZICE9IG51bGwpIHtcclxuICAgICAgJHRoaXMudGFyZ2V0LmNzcyh7XHJcbiAgICAgICAgJ3RvcCc6ICR0aGlzLnBvc1kgKyAncHgnXHJcbiAgICAgIH0pXHJcbiAgICB9ZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIlkgaXMgcmV0dXJuaW5nIG51bGxcIilcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKHgsIHksIGR0LCBlYXNpbmcpIHtcclxuICBsZXQgJHRoaXMgPSAkKHRoaXMpXHJcbiAgJHRoaXMubW92ZVggPSB4XHJcbiAgJHRoaXMubW92ZVkgPSB5XHJcbiAgJHRoaXMub2Zmc2V0WCA9IDVcclxuICAkdGhpcy5vZmZzZXRZID0gNVxyXG4gICR0aGlzLmR0ID0gZHRcclxuICBcclxuICAvLyBYIE1vdmVtZW50XHJcbiAgaWYgKCR0aGlzLm1vdmVYICE9IG51bGwpIHtcclxuICAgIGlmICgkdGhpcy5tb3ZlWCA8IDApIHtcclxuICAgICAgJHRoaXMubW92ZVggKj0gLTFcclxuICAgICAgaWYgKCRwbGF5ZXIucG9zaXRpb24oKS5sZWZ0ID4gMSkge1xyXG4gICAgICAgICRwbGF5ZXIuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgbGVmdDogJy09JyArICR0aGlzLm1vdmVYICsgJ3B4J1xyXG4gICAgICAgIH0sIGR0LCBlYXNpbmcpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgICRtYXAuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgIGxlZnQ6ICcrPScgKyAoJHRoaXMubW92ZVggLSAkdGhpcy5vZmZzZXRYKSArICdweCdcclxuICAgICAgfSwgZHQsIGVhc2luZykgICAgICBcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICgkcGxheWVyLnBvc2l0aW9uKCkubGVmdCA8ICh3aW5kb3cuaW5uZXJXaWR0aC8yKSkge1xyXG4gICAgICAgICRwbGF5ZXIuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgbGVmdDogJys9JyArICR0aGlzLm1vdmVYICsgJ3B4J1xyXG4gICAgICAgIH0sIGR0LCBlYXNpbmcpXHJcbiAgICAgIH1cclxuICAgICAgJG1hcC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgbGVmdDogJy09JyArICgkdGhpcy5tb3ZlWCAtICR0aGlzLm9mZnNldFgpICsgJ3B4J1xyXG4gICAgICB9LCBkdCwgZWFzaW5nKVxyXG4gICAgfVxyXG4gIH1cclxuICAvLyBZIE1vdmVtZW50XHJcbiAgaWYgKCR0aGlzLm1vdmVZICE9IG51bGwpIHtcclxuXHJcbiAgICBpZiAoJHRoaXMubW92ZVkgPCAwKSB7XHJcbiAgICAgICR0aGlzLm1vdmVZICo9IC0xXHJcbiAgICAgIGlmICgkcGxheWVyLnBvc2l0aW9uKCkudG9wID4gMSkge1xyXG4gICAgICAgICRwbGF5ZXIuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgdG9wOiAnLT0nICsgJHRoaXMubW92ZVkgKyAncHgnXHJcbiAgICAgICAgfSwgZHQsIGVhc2luZylcclxuICAgICAgfVxyXG5cclxuICAgICAgJG1hcC5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgdG9wOiAnKz0nICsgKCR0aGlzLm1vdmVZIC0gJHRoaXMub2Zmc2V0WSkgKyAncHgnXHJcbiAgICAgIH0sIGR0LCBlYXNpbmcpXHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKCRwbGF5ZXIucG9zaXRpb24oKS50b3AgPCAod2luZG93LmlubmVySGVpZ2h0LzIpKSB7XHJcbiAgICAgICAgJHBsYXllci5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICB0b3A6ICcrPScgKyAkdGhpcy5tb3ZlWSArICdweCdcclxuICAgICAgICB9LCBkdCwgZWFzaW5nKVxyXG4gICAgICB9XHJcbiAgICAgICRtYXAuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgIHRvcDogJy09JyArICgkdGhpcy5tb3ZlWSAtICR0aGlzLm9mZnNldFkpICsgJ3B4J1xyXG4gICAgICB9LCBkdCwgZWFzaW5nKVxyXG4gICAgICBcclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcbiIsImxldCByb290ID0gbnVsbFxyXG5sZXQgdXNlSGFzaCA9IHRydWUgLy8gRGVmYXVsdHMgdG86IGZhbHNlXHJcbmxldCBoYXNoID0gJyMhJyAvLyBEZWZhdWx0cyB0bzogJyMnXHJcbmxldCByb3V0ZXIgPSBuZXcgTmF2aWdvKHJvb3QsIHVzZUhhc2gsIGhhc2gpXHJcblxyXG5mdW5jdGlvbiByb3V0ZXMoKSB7XHJcbiAgcm91dGVyLm9uKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUuaW5mbygnVGhlIFVuZGVyZ3JvdW5kJylcclxuICAgIGxvY2F0aW9uc0xvYWQoJ3RoZS11bmRlcmdyb3VuZCcpXHJcbiAgICBuZXdTb3VuZCgnc3RhcnQnKVxyXG4gICAgc2V0UG9zaXRpb24oJHBsYXllciwgNjIsIDMxMSlcclxuICAgIGRpYWxvZ3VlSGlkZSgpXHJcbiAgfSlcclxuICBcclxuICByb3V0ZXIubm90Rm91bmQoZnVuY3Rpb24gKHF1ZXJ5KSB7XHJcbiAgICBjb25zb2xlLmluZm8oJzQwNCBwYWdlIG5vdCBmb3VuZCcpXHJcbiAgICBsb2NhdGlvbnNMb2FkKCdzdGF5LWRldGVybWluZWQnKVxyXG4gICAgbmV3U291bmQoJ2RldGVybWluYXRpb24nKVxyXG4gICAgcm91dGVyLm5hdmlnYXRlKFwiLzQwNFwiKVxyXG4gICAgZGVsZXRlTmF2KClcclxuICAgICQoZG9jdW1lbnQpLmtleWRvd24oZnVuY3Rpb24gKGUpIHtcclxuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoXCI0MDRcIikgPiAtMSkge1xyXG4gICAgICAgIHNldFBvc2l0aW9uKCRwbGF5ZXIsIDYyLCAzMTEpXHJcbiAgICAgICAgcm91dGVyLm5hdmlnYXRlKFwiL1wiKVxyXG5cclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9KVxyXG4gIFxyXG4gIFxyXG4gIHJvdXRlclxyXG4gICAgLm9uKHtcclxuXHJcbiAgICAgICdydWlucyc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1J1aW5zJylcclxuICAgICAgICBsb2NhdGlvbnNMb2FkKCdydWlucycpXHJcbiAgICAgICAgbmV3U291bmQoJ3J1aW5zJylcclxuICAgICAgICBzZXRQb3NpdGlvbigkcGxheWVyLCA2ODAsIDM3NylcclxuICAgICAgICBkaWFsb2d1ZSgnVG9yaWVsJywgJyogSSBhbSBUb3JpZWwsIGNhcmV0YWtlciBvZiB0aGUgUnVpbnMuLi5bbmV3XScgK1xyXG4gICAgICAgICAgJyogSSBwYXNzIHRocm91Z2ggdGhpcyBwbGFjZSBldmVyeSBkYXkgdG8gc2VlIGlmIGFueW9uZSBoYXMgZmFsbGVuIGRvd24nKVxyXG4gICAgICB9LFxyXG4gICAgICAncnVpbnMvc3BpZGVyLWJha2Utc2FsZSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuZXdTb3VuZCgnc3BpZGVyZGFuY2UnKVxyXG4gICAgICAgIHNldFBvc2l0aW9uKCRwbGF5ZXIsIDY4MCwgMzc3KVxyXG4gICAgICAgIGRpYWxvZ3VlKCdNdWZmZXQnLCAnKiBUaGUgU3BpZGVyIEJha2UgU2FsZSBpcyBhIHNtYWxsIHZlbmRvciBhbmQgZnVuZHJhaXNpbmcnICtcclxuICAgICAgICAgICcgZXZlbnQgZm91bmQgaW4gdGhlIFJ1aW5zIGFuZCBIb3RsYW5kLicpXHJcbiAgICAgIH0sXHJcbiAgICAgICdzbm93ZGluJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnU25vd2RpbiBGb3Jlc3QnKVxyXG4gICAgICAgIGxvY2F0aW9uc0xvYWQoJ3Nub3dkaW4nKVxyXG4gICAgICAgIG5ld1NvdW5kKCdzbm93ZGluJylcclxuICAgICAgICBzZXRQb3NpdGlvbigkcGxheWVyLCAyNjQsIDQ2OClcclxuICAgICAgfSxcclxuICAgICAgJ3Nub3dkaW4vc25vd21hbic6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXRQb3NpdGlvbigkKCcubWFwJyksIC01NjM0LCAtNzk0KVxyXG4gICAgICAgIHNldFBvc2l0aW9uKCRwbGF5ZXIsIDc2NCwgMzAwKVxyXG4gICAgICB9LFxyXG4gICAgICAnc25vd2Rpbi9ncmlsbGJ5cyc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXRQb3NpdGlvbigkKCcubWFwJyksIC0yMTkwOSwgLTI4NzApXHJcbiAgICAgICAgc2V0UG9zaXRpb24oJHBsYXllciwgNzc5LCAzNDUpXHJcbiAgICAgIH0sXHJcbiAgICAgICdzbm93ZGluL3BhcHlydXMtc2Fucy1ob3VzZSc6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgc2V0UG9zaXRpb24oJCgnLm1hcCcpLCAtMjM4MjcsIC0yODg1KVxyXG4gICAgICAgIHNldFBvc2l0aW9uKCRwbGF5ZXIsIDc3OSwgMzQ1KVxyXG4gICAgICB9LFxyXG5cclxuICAgICAgJ3dhdGVyZmFsbCc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dhdGVyZmFsbCcpXHJcbiAgICAgICAgbG9jYXRpb25zTG9hZCgnd2F0ZXJmYWxsJylcclxuICAgICAgICBzZXRQb3NpdGlvbigkcGxheWVyLCA0NzUsIDM2NSlcclxuICAgICAgICBuZXdTb3VuZCgnd2F0ZXJmYWxsJylcclxuICAgICAgfSxcclxuICAgICAgJ3dhdGVyZmFsbC90ZW1taWUnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdUZW1taWUnKVxyXG4gICAgICAgIHNldFBvc2l0aW9uKCQoJy5tYXAnKSwgLTE0NTk2LCAtNTQ4OClcclxuICAgICAgICBzZXRQb3NpdGlvbigkcGxheWVyLCA3NTMsIDM3NSlcclxuICAgICAgICBuZXdTb3VuZCgndGVtbWllJylcclxuICAgICAgfSxcclxuXHJcbiAgICAgICdob3RsYW5kJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnSG90bGFuZCcpXHJcbiAgICAgICAgbG9jYXRpb25zTG9hZCgnaG90bGFuZCcpXHJcbiAgICAgICAgc2V0UG9zaXRpb24oJHBsYXllciwgMjU4LCA0MzIpXHJcbiAgICAgICAgbmV3U291bmQoJ2hvdGxhbmQnKVxyXG4gICAgICB9LFxyXG4gICAgICAnaG90bGFuZC9hbHBoeSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZXRQb3NpdGlvbigkcGxheWVyLCA3NjgsIDM2OS4yNDYpXHJcbiAgICAgICAgc2V0UG9zaXRpb24oJCgnLm1hcCcpLCAtNDc1OC45NywgLTY2NTguNTYpXHJcbiAgICAgICAgbmV3U291bmQoJ2FscGh5cycpXHJcbiAgICAgIH0sXHJcbiAgICAgICd0aGUtY29yZSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1RoZSBDb3JlJylcclxuICAgICAgICBsb2NhdGlvbnNMb2FkKCd0aGUtY29yZScpXHJcbiAgICAgICAgbmV3U291bmQoJ3RoZS1jb3JlJylcclxuICAgICAgfSxcclxuICAgICAgJ25ldy1ob21lJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUuaW5mbygnTmV3IEhvbWUnKVxyXG4gICAgICAgIGxvY2F0aW9uc0xvYWQoJ25ldy1ob21lJylcclxuICAgICAgICBuZXdTb3VuZCgnaGlzLXRoZW1lJylcclxuICAgICAgfVxyXG4gICAgfSkucmVzb2x2ZSgpXHJcbiAgXHJcbn1cclxuIl19
